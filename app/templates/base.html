<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}{{ site.brand }} — باشگاه شنا{% endblock %}</title>
  <meta name="description" content="رزرو میز، کلاس‌های آموزشی، رویدادها و عضویت در {{ site.brand }}">

  <!-- Bootstrap RTL (5.3) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.rtl.min.css" rel="stylesheet">

  <!-- Font Awesome -->
  <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>

  <!-- Persian Font -->
  <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;600;700&display=swap" rel="stylesheet">

  <!-- Theme CSS from Grayscale -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">

  <style>
  body {
    font-family: 'Vazirmatn', sans-serif;
  }

  /* اصلاحات کوچک RTL برای قالب Grayscale */
  .project-text {
    padding: 2rem;
  }

  /* ناوبار شفاف روی بنر استخر */
  #mainNav {
    background-color: transparent !important;
    transition:
      background-color 0.45s ease,
      box-shadow 0.45s ease,
      padding 0.45s ease;
  }

  /* لوگوی بالای سایت */
  #mainNav .navbar-brand {
    font-weight: 800;
    font-size: 1.25rem;
    letter-spacing: 0.08em;
    color: #ffffff !important;
  }

  /* آیتم‌های منو – بزرگ‌تر و بدون UPPERCASE (بهتر برای فارسی) */
  #mainNav .nav-link {
    font-size: 0.95rem;
    font-weight: 500;
    text-transform: none;
  }

  /* رنگ لینک‌ها بر اساس اسکریپت nav-link-light / nav-link-dark */
  #mainNav .nav-link-light {
    color: #fdfefe !important;       /* روی پس‌زمینه تیره → سفید */
  }

  #mainNav .nav-link-dark {
    color: #102030 !important;       /* روی پس‌زمینه روشن → سرمه‌ای تیره */
  }

  @media (min-width: 992px) {
    #mainNav .nav-link {
      padding-top: 1.75rem;
      padding-bottom: 1.25rem;
    }
  }

  /* حالت اسکرول‌شده: پس‌زمینه سرمه‌ای شبیه رنگ عمیق استخر */
  #mainNav.navbar-shrink {
    background: linear-gradient(
      to bottom,
      rgba(0, 37, 64, 0.96),
      rgba(0, 80, 120, 0.9)
    ) !important;
    box-shadow: 0 0.5rem 1.5rem rgba(0, 0, 0, 0.35);
    backdrop-filter: blur(8px);
  }

  #mainNav.navbar-shrink .navbar-brand {
    color: #fdfefe !important;
  }
</style>


  {% block head %}{% endblock %}
</head>
<body id="page-top">

  <!-- ناوبری -->
  <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
    <div class="container px-4 px-lg-5">
      <a class="navbar-brand" href="#page-top">{{ site.brand }}</a>
      <button class="navbar-toggler navbar-toggler-end" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive"
              aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
        منو <i class="fas fa-bars"></i>
      </button>
      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="#about">ساعت کاری و قوانین</a></li>
          <li class="nav-item"><a class="nav-link" href="#facilities">سالن‌ها و امکانات </a></li>
          <li class="nav-item"><a class="nav-link" href="#events">رویدادها</a></li>
          <li class="nav-item"><a class="nav-link" href="#rankings">رده‌بندی شناگران</a></li>
          <li class="nav-item"><a class="nav-link" href="#" data-bs-toggle="modal" data-bs-target="#bookingModal">رزرو سانس </a></li>
                    <li class="nav-item"><a class="nav-link" href="#contact">تماس</a></li>
        </ul>
        {% if current_user.is_authenticated %}
          <div class="dropdown ms-3">
            <button class="btn btn-outline-light dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
              <i class="fas fa-user ms-1"></i>
              {{ current_user.first_name or "حساب کاربری" }}
            </button>
            <ul class="dropdown-menu dropdown-menu-end">
              <li><a class="dropdown-item" href="{{ url_for('main.user_dashboard') }}">داشبورد</a></li>
              <li><a class="dropdown-item" href="{{ url_for('auth.logout') }}">خروج</a></li>
            </ul>
          </div>
        {% else %}
          <a class="btn btn-outline-light ms-3" href="{{ url_for('auth.login') }}">
            ورود / ثبت‌نام
          </a>
        {% endif %}      
    </div>
  </nav>

    {% block content %}{% endblock %}

  <!-- فوتر -->
  <footer class="footer bg-black small text-center text-white-50">
    <div class="container px-4 px-lg-5">
      © {{ site.brand }} — {{ site.city or "شهر شما" }}
    </div>
  </footer>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Theme & App JS -->
  <script src="{{ url_for('static', filename='js/scripts.js') }}"></script>
  <script src="{{ url_for('static', filename='js/app.js') }}"></script>

  {# --- Global flash toasts --- #}
  <div class="toast-container position-fixed bottom-0 start-0 p-3" style="z-index: 1080;">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, msg in messages %}
          {% set bs_class =
            'success' if category == 'success' else
            'danger'  if category == 'danger'  else
            'warning' if category == 'warning' else 'info'
          %}
          <div class="toast text-bg-{{ bs_class }} border-0 mb-2"
                role="alert"
                aria-live="assertive"
                aria-atomic="true"
                data-bs-autohide="true"
                data-bs-delay="3500">

            <div class="d-flex align-items-center" style="flex-direction: row-reverse;">

              <!-- Close button ALWAYS on the left -->
              <button type="button"
                      class="btn-close btn-close-white ms-2"
                      data-bs-dismiss="toast"
                      aria-label="بستن"></button>

              <!-- Message ALWAYS aligns right and expands -->
              <div class="toast-body text-end flex-grow-1">
                {{ msg }}
              </div>

            </div>

          </div>
        {% endfor %}
      {% endif %}
    {% endwith %}
  </div>


  <script>
    document.addEventListener('DOMContentLoaded', function () {
      var toastElList = [].slice.call(document.querySelectorAll('.toast'));
      toastElList.forEach(function (toastEl) {
        var toast = new bootstrap.Toast(toastEl);
        toast.show();
      });
    });
  </script>

  {% block scripts %}{% endblock %}
</body>
</html>
